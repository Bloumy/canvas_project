(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var HitBox=require("./HitBox");Arme.prototype.TYPE={CUSTOM:"custom",SWORD:"epee"};function Arme(name,url,spriteX,spriteY,tx,ty,angle){if(tx!==undefined||tx!==null){tx=0}if(ty!==undefined||ty!==null){ty=0}if(angle!==undefined||angle!==null){angle=0}this.name=name;this.image=new Image;this.image.referenceDeLArme=this;this.image.src="sprites/"+url;this.largeur=this.image.width/14;this.hauteur=this.image.height/30;this.spriteX=spriteX;this.spriteY=spriteY;this.angle=angle;this.xPixel=tx;this.yPixel=ty;this.tx=tx;this.ty=ty;this.zindex=0;this.animationAttaque=false;this.attaqueDuration=200;this.attaqueTimeOutHolder=null;this.timeCurrentChargement=null;this.chargementAttaqueDuration=1e3;this.chargementAttaqueTimeOutHolder=null;this.pourcentageChargeAttaque=0;this.type=this.TYPE.CUSTOM;this.degats=10;this.poid=1;this.portee=32;this.angleAttaque=45;this.direction=0;this.hitBox=new HitBox(this)}Arme.prototype.equipeToChar=function(char){this.equipedBy=char;char.arme=this;this.zindex=char.zindex};Arme.prototype.getName=function(){return this.name};Arme.prototype.dessinerArme=function(context){context.save();context.translate(this.xPixel+this.tx,this.yPixel+this.ty);context.rotate(this.angle*Math.PI/180);context.translate(-(this.xPixel+this.tx),-(this.yPixel+this.ty));context.drawImage(this.image,this.largeur*this.spriteX,this.hauteur*this.spriteY,this.largeur,this.hauteur,this.xPixel+this.tx,this.yPixel+this.ty,this.largeur,this.hauteur);context.restore()};Arme.prototype.positionnerHitBox=function(){return this.type};Arme.prototype.getType=function(){return this.type};Arme.prototype.positionnerArmeOnChar=function(){if(!this.equipedBy){return}if(this.isChargingAttaque){this.pourcentageChargeAttaque=(Date.now()-this.timeCurrentChargement)*100/this.chargementAttaqueDuration}this.xPixel=this.equipedBy.xPixel;this.yPixel=this.equipedBy.yPixel;var zindex=this.equipedBy.zindex;switch(this.getType()){case this.type=this.TYPE.EPEE:if(this.equipedBy.direction===this.equipedBy.DIRECTIONS.DROITE){var txStart=44;var txEnd=14;var tyStart=4;var tyEnd=-8;var angleStart=90;var angleEnd=40;if(this.animationAttaque){this.tx=50;this.ty=40;this.angle=150;this.zindex=zindex+10}else if(this.isChargingAttaque){this.tx=txEnd+(txStart-txEnd-(txStart-txEnd)*this.pourcentageChargeAttaque/100);this.ty=tyEnd+(tyStart-tyEnd-(tyStart-tyEnd)*this.pourcentageChargeAttaque/100);this.angle=angleEnd+(angleStart-angleEnd-(angleStart-angleEnd)*this.pourcentageChargeAttaque/100);this.zindex=zindex+10}else{this.tx=txStart;this.ty=tyStart;this.angle=angleStart;this.zindex=zindex+10}}if(this.equipedBy.direction===this.equipedBy.DIRECTIONS.GAUCHE){var txStart=-13;var txEnd=17;var tyStart=4;var tyEnd=-8;var angleStart=0;var angleEnd=50;if(this.animationAttaque){this.tx=-19;this.ty=36;this.angle=-60;this.zindex=zindex-10}else if(this.isChargingAttaque){this.tx=txEnd+(txStart-txEnd-(txStart-txEnd)*this.pourcentageChargeAttaque/100);this.ty=tyEnd+(tyStart-tyEnd-(tyStart-tyEnd)*this.pourcentageChargeAttaque/100);this.angle=angleEnd+(angleStart-angleEnd-(angleStart-angleEnd)*this.pourcentageChargeAttaque/100);this.zindex=zindex-10}else{this.tx=txStart;this.ty=tyStart;this.angle=angleStart;this.zindex=zindex-10}}if(this.equipedBy.direction===this.equipedBy.DIRECTIONS.HAUT){var txStart=20;var txEnd=20;var tyStart=-6;var tyEnd=-20;var angleStart=45;var angleEnd=45;if(this.animationAttaque){this.tx=20;this.ty=40;this.angle=225;this.zindex=zindex-10}else if(this.isChargingAttaque){this.tx=txEnd+(txStart-txEnd-(txStart-txEnd)*this.pourcentageChargeAttaque/100);this.ty=tyEnd+(tyStart-tyEnd-(tyStart-tyEnd)*this.pourcentageChargeAttaque/100);this.angle=angleEnd+(angleStart-angleEnd-(angleStart-angleEnd)*this.pourcentageChargeAttaque/100);this.zindex=zindex-10}else{this.tx=txStart;this.ty=tyStart;this.angle=angleStart;this.zindex=zindex-10}}if(this.equipedBy.direction===this.equipedBy.DIRECTIONS.BAS){var txStart=12;var txEnd=12;var tyStart=-6;var tyEnd=-20;var angleStart=45;var angleEnd=45;if(this.animationAttaque){this.tx=12;this.ty=66;this.angle=225;this.zindex=zindex+10}else if(this.isChargingAttaque){this.tx=txEnd+(txStart-txEnd-(txStart-txEnd)*this.pourcentageChargeAttaque/100);this.ty=tyEnd+(tyStart-tyEnd-(tyStart-tyEnd)*this.pourcentageChargeAttaque/100);this.angle=angleEnd+(angleStart-angleEnd-(angleStart-angleEnd)*this.pourcentageChargeAttaque/100);this.zindex=zindex+10}else{this.tx=txStart;this.ty=tyStart;this.angle=angleStart;this.zindex=zindex+10}}break;default:}};Arme.prototype.chargerAttaque=function(){var self=this;this.timeCurrentChargement=Date.now();this.isChargingAttaque=true;this.chargementAttaqueTimeOutHolder=setTimeout(function(){this.timeCurrentChargement=null;self.attaquer()},this.chargementAttaqueDuration)};Arme.prototype.attaquer=function(){if(!this.isChargingAttaque){return}clearTimeout(this.chargementAttaqueTimeOutHolder);this.pourcentageChargeAttaque=0;this.isChargingAttaque=false;this.animationAttaque=true;var self=this;this.attaqueTimeOutHolder=setTimeout(function(){self.animationAttaque=false;self.isChargingAttaque=false},this.attaqueDuration);var cibles=this.getTargetsInRange();var degats=0;for(var cible in cibles){degats=this.calculateDamage(cible);cible.vie-=degats}};Arme.prototype.annulerAttaque=function(){if(!this.animationAttaque){return}clearTimeout(this.attaqueHolder);this.animationAttaque=false};Arme.prototype.getTargetsInRange=function(){var targets=[];return targets};Arme.prototype.calculateDamage=function(cible){return this.degats};module.exports=Arme},{"./HitBox":6}],2:[function(require,module,exports){var Arme=require("./Arme");function Armes(){this.ARME_TYPE={};this.ARME_TYPE.EPEE="epee";this.armes=[];return this}Armes.prototype.getArmes=function(){return this.armes};Armes.prototype.createArme=function(type,name,url,imgXSource,imgYSource,decalageXDest,decalageYDest,angle){if(type+"_"+name in this.armes){return false}var arme=new Arme(name,url,imgXSource,imgYSource,decalageXDest,decalageYDest,angle);arme.type=type;this.armes[type+"_"+name]=arme;return arme};Armes.prototype.getArme=function(type,name){if(type+"_"+name in this.armes){return this.arme[type+"_"+name]}return null};Armes.prototype.removeArme=function(type,name){if(type+"_"+name in this.armes){this.armes.splice(type+"_"+name,1)}return null};Armes.prototype.createEpee=function(name){return this.createArme(this.ARME_TYPE.EPEE,name,"icones.png",0,5,0,0,0)};Armes.prototype.getEpee=function(name){return this.getArme(this.ARME_TYPE.EPEE,name)};Armes.prototype.removeEpee=function(name){return this.removeArme(this.ARME_TYPE.EPEE,name)};module.exports=Armes},{"./Arme":1}],3:[function(require,module,exports){var Key=require("./Key");var Mouse=require("./Mouse");var Directions=require("./Directions");function Controles(map,canvasDiv){this.i=0;this.map=map;this.canvasDiv=canvasDiv;this.directions=new Directions;this.initCommandeKey()}Controles.prototype.initCommandeKey=function(){var k=new Key(this.canvasDiv);var m=new Mouse(this.canvasDiv);this.mouse=m;this.keys=k};Controles.prototype.assignKeybordToChar=function(char){var self=this;document.addEventListener("activatekey",function(e){self.activateCharCommande(char)});document.addEventListener("deactivatekey",function(e){self.activateCharCommande(char)});document.addEventListener("activatemousebutton",function(e){self.activateCharCommande(char)});document.addEventListener("deactivatemousebutton",function(e){self.activateCharCommande(char)})};Controles.prototype.activateCharCommande=function(char){var keys=this.keys.getKeysActivated();var keysReverse=this.swap(keys);var key=this.keys.KEY;var mouseButtons=this.mouse.getButtonsActivated();var mouseButtonsReverse=this.swap(mouseButtons);var mouseButton=this.mouse.BUTTON;if(mouseButton.left in mouseButtonsReverse){char.chargerAttaque()}else{if(char.isChargingAttaque){char.attaquer()}}if(key.up in keysReverse&&key.right in keysReverse){char.deplacer(315,this.map);return true}if(key.down in keysReverse&&key.right in keysReverse){char.deplacer(45,this.map);return true}if(key.up in keysReverse&&key.left in keysReverse){char.deplacer(225,this.map);return true}if(key.down in keysReverse&&key.left in keysReverse){char.deplacer(135,this.map);return true}if(key.up in keysReverse){char.deplacer(270,this.map);return true}if(key.right in keysReverse){char.deplacer(0,this.map);return true}if(key.down in keysReverse){char.deplacer(90,this.map);return true}if(key.left in keysReverse){char.deplacer(180,this.map);return true}char.doNothing();return false};Controles.prototype.swap=function(array){var ret={};for(var key in array){ret[array[key]]=key}return ret};module.exports=Controles},{"./Directions":4,"./Key":7,"./Mouse":9}],4:[function(require,module,exports){function Directions(){}Directions.prototype.DIRECTION={DROITE:0,BAS:1,GAUCHE:2,HAUT:3};module.exports=Directions},{}],5:[function(require,module,exports){function Helper(){return this}Helper.prototype.getCoordonnees=function(x,y,angle,nbPx){var coord={x:null,y:null};coord.x=Math.round(x+nbPx*Math.cos(angle*(2*Math.PI)/360));coord.y=Math.round(y+nbPx*Math.sin(angle*(2*Math.PI)/360));return coord};module.exports=Helper},{}],6:[function(require,module,exports){var Helper=require("./Helper");function HitBox(owner){this.owner=owner;this.positionnerHitBox()}HitBox.prototype.positionnerHitBox=function(){this.hitBoxRayon=this.owner.portee;this.hitBoxCenterX=this.owner.xPixel;this.hitBoxCenterY=this.owner.yPixel;this.angle=this.owner.angleAttaque;this.angleOffset=0;if(this.owner&&this.owner.equipedBy){this.hitBoxCenterX=this.owner.equipedBy.xPixel+this.owner.equipedBy.largeur/2;this.hitBoxCenterY=this.owner.equipedBy.yPixel+this.owner.equipedBy.hauteur/2;this.angleOffset=this.owner.equipedBy.angle}};HitBox.prototype.drawDamageZone=function(context){var timePassed=Date.now()-this.owner.timeCurrentChargement;var timeMax=this.owner.chargementAttaqueDuration;this.positionnerHitBox();var startingAngle=-this.angle/2+this.angleOffset;var endingAngle=this.angle/2+this.angleOffset;context.beginPath();context.moveTo(this.hitBoxCenterX,this.hitBoxCenterY);context.arc(this.hitBoxCenterX,this.hitBoxCenterY,this.hitBoxRayon*timePassed/timeMax,this.degresToRadians(startingAngle),this.degresToRadians(endingAngle),false);context.lineTo(this.hitBoxCenterX,this.hitBoxCenterY);context.fillStyle="red";context.fill();context.closePath();context.beginPath();context.moveTo(this.hitBoxCenterX,this.hitBoxCenterY);context.arc(this.hitBoxCenterX,this.hitBoxCenterY,this.hitBoxRayon,this.degresToRadians(startingAngle),this.degresToRadians(endingAngle),false);context.lineTo(this.hitBoxCenterX,this.hitBoxCenterY);context.stroke();context.closePath()};HitBox.prototype.degresToRadians=function(degres){return degres*Math.PI/180};HitBox.prototype.RadiansToDegres=function(radians){return radians*180/Math.PI};module.exports=HitBox},{"./Helper":5}],7:[function(require,module,exports){function Key(){this.initKeyMap()}Key.prototype.KEY={left:37,up:38,right:39,down:40,A:65,D:68,Q:81,S:83,W:87,Z:90,a:97,d:100,q:113,s:115,w:119,z:122};Key.prototype.KEY_REVERSE={37:"left",38:"up",39:"right",40:"down",65:"A",68:"D",81:"Q",83:"S",87:"W",90:"Z",97:"a",100:"d",113:"q",115:"s",119:"w",122:"z"};Key.prototype.initKeyMap=function(){this.keyMap=[];for(var key in this.KEY_REVERSE){this.keyMap[key]=false}var self=this;var eventKeyDown=new CustomEvent("activatekey");window.onkeydown=function(e){if(e.keyCode in self.KEY_REVERSE&&self.keyMap[e.keyCode]!=true){self.keyMap[e.keyCode]=true;eventKeyDown.keyCode=e.which||e.keyCode;eventKeyDown.key=self.KEY_REVERSE[e.keyCode];eventKeyDown.keysActivated=self.getKeysActivated();document.dispatchEvent(eventKeyDown)}};var eventKeyUp=new CustomEvent("deactivatekey");window.onkeyup=function(e){if(e.keyCode in self.KEY_REVERSE&&self.keyMap[e.keyCode]!=false){self.keyMap[e.keyCode]=false;eventKeyUp.keyCode=e.which||e.keyCode;eventKeyUp.key=self.KEY_REVERSE[e.keyCode];eventKeyUp.keysActivated=self.getKeysActivated();document.dispatchEvent(eventKeyUp)}}};Key.prototype.getKeysActivated=function(){var activatedKeys=[];for(var key in this.KEY_REVERSE){if(this.keyMap[key]==true){activatedKeys.push(key)}}return activatedKeys};module.exports=Key},{}],8:[function(require,module,exports){var XHR=require("./XHR");var Tileset=require("./Tileset");var Map=function(nom){this.TAILLE_CASE_EN_PX=32;var xhr=new XHR;xhr.open("GET","./maps/"+nom+".json",false);xhr.send(null);if(xhr.readyState!=4||xhr.status!=200&&xhr.status!=0)throw new Error('Impossible de charger la carte nommée "'+nom+'" (code HTTP : '+xhr.status+").");var mapJsonData=xhr.responseText;var mapData=JSON.parse(mapJsonData);this.tileset=new Tileset(mapData.tileset);this.terrain=mapData.terrain;this.personnages=new Array};Map.prototype.getHauteur=function(){return this.terrain.length};Map.prototype.getLargeur=function(){return this.terrain[0].length};Map.prototype.dessinerMap=function(context){for(var i=0,l=this.terrain.length;i<l;i++){var ligne=this.terrain[i];var y=i*this.TAILLE_CASE_EN_PX;for(var j=0,k=ligne.length;j<k;j++){this.tileset.dessinerTile(ligne[j],context,j*this.TAILLE_CASE_EN_PX,y)}}for(var i=0,l=this.personnages.length;i<l;i++){this.personnages[i].dessinerPersonnage(context)}};Map.prototype.dessinerMapBoucleAuto=function(context,milisecondes){var self=this;this.refreshInterval=milisecondes;setInterval(function(){self.dessinerMap(context)},milisecondes)};Map.prototype.isObstacle=function(coord){return false};Map.prototype.addPersonnage=function(perso){perso.map=this;this.personnages.push(perso)};module.exports=Map},{"./Tileset":11,"./XHR":12}],9:[function(require,module,exports){function Mouse(canvas){this.canvas=canvas;this.initMouse()}Mouse.prototype.BUTTON_REVERSE={1:"left",2:"center",3:"right"};Mouse.prototype.BUTTON={left:"1",center:"2",right:"3"};Mouse.prototype.SCROLL_REVERSE={1:"Up","-1":"Down"};Mouse.prototype.SCROLL={Up:"1",Down:"-1"};Mouse.prototype.initMouse=function(){this.buttonMap=[];for(var button in this.BUTTON_REVERSE){this.buttonMap[button]=false}var self=this;this.canvas.oncontextmenu=new Function("return false");var eventActivateMouseButtonDown=new CustomEvent("activatemousebutton");this.canvas.addEventListener("mousedown",function(e){if(e.which in self.BUTTON_REVERSE&&self.buttonMap[e.which]!=true){self.buttonMap[e.which]=true;eventActivateMouseButtonDown.buttonCode=e.which;eventActivateMouseButtonDown.button=self.BUTTON_REVERSE[e.which];eventActivateMouseButtonDown.buttonsActivated=self.getButtonsActivated();document.dispatchEvent(eventActivateMouseButtonDown)}});var eventActivateMouseButtonUp=new CustomEvent("deactivatemousebutton");this.canvas.addEventListener("mouseup",function(e){if(e.which in self.BUTTON_REVERSE&&self.buttonMap[e.which]!=false){self.buttonMap[e.which]=false;eventActivateMouseButtonUp.buttonCode=e.which;eventActivateMouseButtonUp.button=self.BUTTON_REVERSE[e.which];eventActivateMouseButtonUp.buttonsActivated=self.getButtonsActivated();document.dispatchEvent(eventActivateMouseButtonUp)}});var eventActivateMouseScroll=new CustomEvent("activatemousescroll");var mouseScrollHandler=function(e){var e=window.event||e;var delta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));if(delta in self.SCROLL_REVERSE){eventActivateMouseScroll.scrollCode=delta;eventActivateMouseScroll.position=self.SCROLL_REVERSE[delta];document.dispatchEvent(eventActivateMouseScroll)}};document.addEventListener("mousewheel",mouseScrollHandler);document.addEventListener("DOMMouseScroll",mouseScrollHandler);var eventMouseMoveWhileClick=new CustomEvent("mousemovewhileclick");this.canvas.addEventListener("mousemove",function(e){if(self.getButtonsActivated().length>0){eventMouseMoveWhileClick.bottonCode=self.getButtonsActivated();eventMouseMoveWhileClick.coord={};eventMouseMoveWhileClick.coord.x=e.clientX;eventMouseMoveWhileClick.coord.y=e.clientY;eventMouseMoveWhileClick.buttonsActivateds=self.getButtonsActivated();document.dispatchEvent(eventMouseMoveWhileClick)}})};Mouse.prototype.getButtonsActivated=function(){var activatedButtons=[];for(var button in this.BUTTON_REVERSE){if(this.buttonMap[button]==true){activatedButtons.push(button)}}return activatedButtons};module.exports=Mouse},{}],10:[function(require,module,exports){var Directions=require("./Directions");function Personnage(url,x,y,angle){this.FRAME_PAR_CASE=1;this.NB_PX_DEPLACEMENT=4;this.CASES_PAR_SECONDE=4;this.DEFAULT_VITESSE=this.CASES_PAR_SECONDE/this.NB_PX_DEPLACEMENT*32;var d=new Directions;this.DIRECTIONS=d.DIRECTION;this.map=null;this.vitesse=this.DEFAULT_VITESSE;this.xPixel=x*32;this.yPixel=y*32;this.direction=this.getDirectionByAngle(angle);this.angle=angle;this.image=new Image;this.image.referenceDuPerso=this;this.image.src="sprites/"+url;this.largeur=this.image.width/4;this.hauteur=this.image.height/4;this.hitBoxRayon=(this.largeur+this.hauteur)/4;this.frame=0;this.interval=null;this.zindex=0;this.isChargingAttaque=false;return this}Personnage.prototype.dessinerPersonnage=function(context){if(this.arme&&this.arme.zindex<this.zindex){this.arme.positionnerArmeOnChar();this.arme.dessinerArme(context)}context.drawImage(this.image,this.largeur*this.frame,this.getFrame()*this.hauteur,this.largeur,this.hauteur,this.xPixel,this.yPixel,this.largeur,this.hauteur);if(this.arme&&this.arme.zindex>=this.zindex){this.arme.positionnerArmeOnChar();this.arme.dessinerArme(context)}if(this.arme.isChargingAttaque){this.arme.hitBox.drawDamageZone(context)}};Personnage.prototype.getCoordonneesAdjacentes=function(angle,nbPx){if(nbPx===undefined||nbPx===null){nbPx=this.NB_PX_DEPLACEMENT}var coord={x:null,y:null};coord.x=Math.round(this.xPixel+nbPx*Math.cos(angle*(2*Math.PI)/360));coord.y=Math.round(this.yPixel+nbPx*Math.sin(angle*(2*Math.PI)/360));return coord};Personnage.prototype.deplacerEnPx=function(angle,map,nbPx){this.angle=angle;this.direction=this.getDirectionByAngle(angle);var coordDestination=this.getCoordonneesAdjacentes(angle,nbPx);if(!this.canGoTo(map,coordDestination)){return false}this.xPixel=coordDestination.x;this.yPixel=coordDestination.y;return true};Personnage.prototype.getDirectionByAngle=function(angle){if(45<=angle&&angle<=135){return this.DIRECTIONS.BAS}if(0<=angle&&angle<45||315<angle&&angle<=360){return this.DIRECTIONS.DROITE}if(225<=angle&&angle<=315){return this.DIRECTIONS.HAUT}if(135<angle&&angle<225){return this.DIRECTIONS.GAUCHE}};Personnage.prototype.doNothing=function(){clearInterval(this.interval);this.frame=0};Personnage.prototype.deplacer=function(angle,map,nbPx){clearInterval(this.interval);this.frame=0;if(nbPx===undefined||nbPx===null){var d=map.TAILLE_CASE_EN_PX;var v=this.vitesse;v=v*32;var t=d/v;var millisecondes=t*1e3;var nbPx=this.NB_PX_DEPLACEMENT;var distance_pour_une_frame=map.TAILLE_CASE_EN_PX/this.FRAME_PAR_CASE;var self=this;this.deplacerEnPx(angle,map,nbPx);this.frame++;var pxParcourus=0;this.interval=setInterval(function(){self.deplacerEnPx(angle,map,nbPx);if(pxParcourus>=distance_pour_une_frame){self.frame++;pxParcourus=0}if(self.frame>3){self.frame%=4}pxParcourus+=nbPx},millisecondes)}else{this.deplacerEnPx(angle,map,nbPx)}};Personnage.prototype.canGoTo=function(map,coord){if(coord.x<0){return false}if(coord.y<0){return false}if(coord.x>=(map.getLargeur()-1)*map.TAILLE_CASE_EN_PX){return false}if(coord.y>=(map.getHauteur()-(1+(this.hauteur-map.TAILLE_CASE_EN_PX)/map.TAILLE_CASE_EN_PX))*map.TAILLE_CASE_EN_PX){return false}if(map.isObstacle(coord)){return false}return true};Personnage.prototype.equiperArme=function(arme){this.arme=arme;this.arme.equipedBy=this;this.arme.zindex=this.zindex;this.arme.equipeToChar(this);this.positionnerArme()};Personnage.prototype.positionnerArme=function(){if(!this.arme){return}this.arme.positionnerArmeOnChar()};Personnage.prototype.chargerAttaque=function(){if(!this.arme){return false}this.arme.chargerAttaque();this.isChargingAttaque=true;return true};Personnage.prototype.attaquer=function(){if(!this.arme){return false}this.arme.attaquer();this.isChargingAttaque=false;return true};Personnage.prototype.annulerAttaque=function(){if(!this.arme){return false}this.arme.annulerAttaque();return true};Personnage.prototype.getFrame=function(){switch(this.direction){case this.DIRECTIONS.DROITE:return 2;break;case this.DIRECTIONS.BAS:return 0;break;case this.DIRECTIONS.GAUCHE:return 1;break;case this.DIRECTIONS.HAUT:return 3;break}return 0};module.exports=Personnage},{"./Directions":4}],11:[function(require,module,exports){function Tileset(url){this.image=new Image;this.image.referenceDuTileset=this;this.image.onload=function(){if(!this.complete){throw new Error('Erreur de chargement du tileset nommé "'+url+'".')}this.referenceDuTileset.largeur=this.width/32};this.image.src="tilesets/"+url}Tileset.prototype.dessinerTile=function(numero,context,xDestination,yDestination){var xSourceEnTiles=numero%this.largeur;if(xSourceEnTiles==0){xSourceEnTiles=this.largeur}var ySourceEnTiles=Math.ceil(numero/this.largeur);var xSource=(xSourceEnTiles-1)*32;var ySource=(ySourceEnTiles-1)*32;context.drawImage(this.image,xSource,ySource,32,32,xDestination,yDestination,32,32)};module.exports=Tileset},{}],12:[function(require,module,exports){var XHR=function(){return this.getXMLHttpRequest()};XHR.prototype.getXMLHttpRequest=function(){var xhr=null;if(window.XMLHttpRequest||window.ActiveXObject){if(window.ActiveXObject){try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP")}}else{xhr=new XMLHttpRequest}}else{alert("Votre navigateur ne supporte pas l'objet XMLHTTPRequest...");return null}return xhr};module.exports=XHR},{}],13:[function(require,module,exports){var Directions=require("./classes/Directions");var Map=require("./classes/Map");var Personnage=require("./classes/Personnage");var Controles=require("./classes/Controles");var Armes=require("./classes/Armes");window.onload=function(){var canvas=document.getElementById("canvas");var ctx=canvas.getContext("2d");var map=new Map("floor1");var controles=new Controles(map,canvas);var angle=0;var hero=new Personnage("hero.png",1,1,angle);var armes=new Armes;var epee=armes.createEpee("ExcaliBurne");canvas.width=map.getLargeur()*32;canvas.height=map.getHauteur()*32;map.addPersonnage(hero);controles.assignKeybordToChar(hero);hero.equiperArme(epee);map.dessinerMapBoucleAuto(ctx,40)}},{"./classes/Armes":2,"./classes/Controles":3,"./classes/Directions":4,"./classes/Map":8,"./classes/Personnage":10}]},{},[13]);
